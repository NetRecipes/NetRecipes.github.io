---
date: '2025-11-14T23:47:21+05:30'
title: 'Introduction'
summary: 'Introduction to building `Scrum Poker`'
tags: ['Design', 'Architecture', 'Mermaid']
weight: 10
---

Endpoints, Service Contracts and Sequence Diagrams for building a `Scrum Poker` app.

---

## High level design

```mermaid
graph TD
  Browser["Browser Clients"]
  BFF["Blazor Server App – UI + BFF"]
  API["ASP NET 9 Web API"]
  Store["State Store"]
  PubSub["Pub/Sub Broker"]

  Browser -->|User interaction| BFF
  BFF -->|HTTP REST calls| API
  API -->|Save / retrieve state| Store
  API -.->|Publish events| PubSub
  PubSub -.->|Event notification| BFF
  BFF -->|Push UI updates| Browser
```

---

## Endpoints

| Operation | Method & Path | Request Body (DTO) | Success Response | Error Codes (body → Error) |
| --- | --- | --- | --- | --- |
| [Create New Game](#file-01-create-new-game-md) | POST `/games` | **CreateGameRequest**<br/>```json<br/>{<br/>  "player": "string"<br/>}``` | **201 Created**<br/>`GameResponse` | 422 Unprocessable Entity (invalid player) |
| [Join Existing Game](#file-02-join-existing-game-md) | POST `/games/{gameId}/join` | **JoinGameRequest**<br/>```json<br/>{<br/>  "player": "string"<br/>}``` | **200 OK**<br/>`GameResponse` | 422 Unprocessable Entity (invalid player)<br/>404 Not Found<br/>409 Conflict (already joined) |
| [Submit Vote](#file-03-submit-vote-md) | POST `/games/{gameId}/vote` | **VoteRequest**<br/>```json<br/>{<br/>  "player": "string",<br/>  "value": 13<br/>}``` | **200 OK**<br/>`GameResponse` | 422 Unprocessable Entity (invalid vote/player)<br/>404 Not Found<br/>409 Conflict (not joined) |
| [Reset Votes](#file-04-reset-votes-md) | POST `/games/{gameId}/votes/reset` | _No body_ (path-only) | **200 OK**<br/>`GameResponse` | 422 Unprocessable Entity (invalid gameId)<br/>404 Not Found |
| [Get Game State](#file-05-get-game-state-md) | GET /games/{gameId} | — | 200 OK + GameResponse | 404 Not Found |
| [Remove a Player](#file-06-remove-a-player-md) | DELETE /admin/games/{gameId}/players/{player} | — | 204 No Content | 404 Not Found, 409 Conflict (not in game) |
| [End Game](#file-07-end-game-md) | DELETE /admin/games/{gameId} | — | 204 No Content | 404 Not Found |

---

## Client Updates - Real-time

This flow is common for all endpoints

```mermaid
sequenceDiagram
  participant PubSub as "Pub/Sub Broker"
  participant API as "ASP.NET 9 Web API"
  participant Store as "State Store"
  participant Hub as "SignalR Hub"
  participant Clients as "Connected Clients"

  PubSub->>API: Event:{gameId,...}
  API->>Store: GET game:{gameId}

  alt Game not found
    API-->>Hub: SendAsync("GameDeleted", gameId)
    Hub-->>Clients: GameDeleted event pushed
  else Game exists
    Store-->>API: GameResponse
    API-->>Hub: SendAsync("GameUpdated", GameResponse)
    Hub-->>Clients: GameUpdated event pushed
  end
```
